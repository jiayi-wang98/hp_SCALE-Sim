[general]
run_name = Gemmini_os_piped_f2

[architecture_presets]
; 1. 阵列尺寸：基于 Gemmini 论文中的具体实现案例
ArrayHeight:    16
ArrayWidth:     16

; 2. SRAM 大小：基于 Gemmini 的 Scratchpad 和 Accumulator
; Gemmini 拥有 256KB 共享 Scratchpad 和 64KB Accumulator
; SCALE-Sim 需要分离 Input 和 Filter，因此我们将 256KB Scratchpad 平分
IfmapSramSzkB:    128
FilterSramSzkB:   128
OfmapSramSzkB:    64

; 3. 地址偏移量 (SCALE-Sim 模拟需要，防止地址冲突，保持默认即可)
IfmapOffset:    0
FilterOffset:   10000000
OfmapOffset:    20000000

; 4. 数据流：Gemmini 支持 OS 和 WS，这里选择 Output Stationary
Dataflow : os_piped_f2

; 带宽 (Words/Cycle) 计算：
; 依据 Gemmini 运行频率 1 GHz 
; 依据标准 TileLink 接口位宽 128-bit (16 Bytes)
; Bandwidth = 16 Bytes / 1 Byte(INT8 word) = 16 words/cycle
Bandwidth : 16
ReadRequestBuffer: 512
WriteRequestBuffer: 512

[layout]
; 这些是 SCALE-Sim 的特定布局参数，保持标准配置即可
IfmapCustomLayout: False
IfmapSRAMBankBandwidth: 32
IfmapSRAMBankNum: 4
IfmapSRAMBankPort: 1
FilterCustomLayout: False
FilterSRAMBankBandwidth: 32
FilterSRAMBankNum: 4
FilterSRAMBankPort: 1

[sparsity]
; Gemmini 论文主要讨论密集计算，且 Scale-Sim 主要模拟密集阵列
SparsitySupport : false
SparseRep : ellpack_block
OptimizedMapping : false
BlockSize : 8
RandomNumberGeneratorSeed : 40

[run_presets]
InterfaceBandwidth: USER
UseRamulatorTrace: False